(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,o){e.exports=o(28)},21:function(e,t,o){},26:function(e,t,o){},28:function(e,t,o){"use strict";o.r(t);var n=o(0),a=o.n(n),r=o(14),s=o.n(r),c=o(3),l=o(4),i=o(6),h=o(5),u=o(7),p=o(31),f=o(12),m="https://reactnd-books-api.udacity.com",b=localStorage.token;b||(b=localStorage.token=Math.random().toString(36).substr(-8));var k={Accept:"application/json",Authorization:b},d=function(){return fetch("".concat(m,"/books"),{headers:k}).then(function(e){return e.json()}).then(function(e){return e.books})},v=function(e,t){return fetch("".concat(m,"/books/").concat(e.id),{method:"PUT",headers:Object(f.a)({},k,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},S=function(e){return fetch("".concat(m,"/search"),{method:"POST",headers:Object(f.a)({},k,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})},y=function(e){return e.sort(function(e,t){var o=e.title.toUpperCase(),n=t.title.toUpperCase();return o<n?-1:o>n?1:0})},E=function(e,t){var o={};return e.forEach(function(e){return o[e.id]=e.shelf}),t.forEach(function(e){e.shelf=o[e.id]||"none"}),t},w=(o(21),o(29)),j=function(e){function t(){var e,o;Object(c.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(o=Object(i.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).state={shelfSelection:o.props.book.shelf||"none"},o.onSwitchShelf=function(e,t){o.setState({shelfSelection:t}),o.props.onSwitchShelf(e,t)},o.componentWillReceiveProps=function(e){o.props=e,o.setState({shelfSelection:o.props.book.shelf})},o}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"book-shelf-changer"},a.a.createElement("select",{value:this.state.shelfSelection,onChange:function(t){return e.onSwitchShelf(e.props.book,t.target.value)}},a.a.createElement("option",{value:"move",disabled:!0},"Move to..."),a.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),a.a.createElement("option",{value:"wantToRead"},"Want to Read"),a.a.createElement("option",{value:"read"},"Read"),a.a.createElement("option",{value:"none"},"None")))}}]),t}(n.Component),O=function(e){function t(){var e,o;Object(c.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(o=Object(i.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).state={shelfSelection:o.props.book.shelf||"none"},o}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.book.authors&&this.props.book.authors.join(" | "),o=this.props.book.imageLinks&&"url(".concat(this.props.book.imageLinks.thumbnail,")");return a.a.createElement("div",{className:"book"},a.a.createElement("div",{className:"book-top"},a.a.createElement("button",{className:"book-cover-button",onClick:function(t){return e.props(t,e.props.book)}},a.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:o}})),a.a.createElement(j,{book:this.props.book,onSwitchShelf:this.props.onSwitchShelf})),a.a.createElement("div",{className:"book-title"},this.props.book.title),a.a.createElement("div",{className:"book-authors"},t))}}]),t}(n.Component),g=function(e){function t(){var e,o;Object(c.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(o=Object(i.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).state={},o}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"bookshelf"},a.a.createElement("h2",{className:"bookshelf-title"},this.props.shelf.name),a.a.createElement("div",{className:"bookshelf-books"},a.a.createElement("ol",{className:"books-grid"},this.props.shelf.books.map(function(t){return a.a.createElement("li",{key:t.id},a.a.createElement(O,{book:t,onSwitchShelf:e.props.onSwitchShelf}))}))))}}]),t}(n.Component),N=function(e){function t(){var e,o;Object(c.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(o=Object(i.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).state={},o.componentDidMount=function(){o.props.onRefreshAllBooks()},o.updateShelfStatus=function(){return[{name:"Currently Reading",books:o.props.books.filter(function(e){return"currentlyReading"===e.shelf})},{name:"Want to Read",books:o.props.books.filter(function(e){return"wantToRead"===e.shelf})},{name:"Read",books:o.props.books.filter(function(e){return"read"===e.shelf})}]},o}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=[];return this.props.books&&this.props.books.length&&(t=this.updateShelfStatus()),a.a.createElement("div",{className:"app"},a.a.createElement("div",{className:"list-books"},a.a.createElement("div",{className:"list-books-title"},a.a.createElement("h1",null,"MyReads")),a.a.createElement("div",{className:"list-books-content"},a.a.createElement("div",null,t&&t.map(function(t){return a.a.createElement(g,{key:t.name,shelf:t,onSwitchShelf:e.props.onSwitchShelf})}))),a.a.createElement("div",{className:"open-search"},a.a.createElement(w.a,{to:"/search"},"Add a Book"))))}}]),t}(n.Component),C=function(e){function t(){var e,o;Object(c.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(o=Object(i.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).state={query:"",books:[]},o.queryTimer=null,o.newQuery=function(e){clearTimeout(o.queryTimer),o.setState({query:e}),o.queryTimer=setTimeout(o.renewSearch,250)},o.renewSearch=function(){""!==o.state.query?S(o.state.query).then(function(e){var t=[],n=!1;void 0===e||e.error&&"empty query"!==e.error?n=!0:e.length&&(t=E(o.props.selectedBooks,e),t=y(t)),o.setState({error:n,books:t})}):o.setState({error:!1,books:[]})},o.componentRecievesProps=function(e){o.props=e;var t=E(o.props.selectedBooks,o.state.books);t=y(t),o.setState({books:t})},o}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"search-books"},a.a.createElement("div",{className:"search-books-bar"},a.a.createElement(w.a,{className:"close-search",to:"/"},"Close"),a.a.createElement("div",{className:"search-books-input-wrapper"},a.a.createElement("input",{type:"text",placeholder:"Search by title or author",onChange:function(t){return e.newQuery(t.target.value)},value:this.state.query.value}))),a.a.createElement("div",{className:"search-books-results"},this.state.error&&a.a.createElement("div",{className:"search-error"},"'Sorry, there has been an issue with your search. Please search again.'"),!this.state.error&&a.a.createElement("span",{className:"search-count"},this.state.books.length,"\xa0 meet your search requirements."),a.a.createElement("ol",{className:"books-grid"},this.state.books&&this.state.books.map(function(t){return a.a.createElement("li",{key:t.id},a.a.createElement(O,{book:t,onSwitchShelf:e.props.onSwitchShelf}))}))))}}]),t}(n.Component),R=function(e){function t(){var e,o;Object(c.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(o=Object(i.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).state={showSearchPage:!1},o.componentDidMount=function(){o.state.newBook&&o.refreshAllBooks()},o.refreshAllBooks=function(){d().then(function(e){o.setState({books:y(e),newBook:!1})})},o.switchShelf=function(e,t){v(e,t).then(function(n){var a=o.state.books.slice(0),r=a.filter(function(t){return t.id===e.id});r.length?r[0].shelf=t:(a.push(e),a=y(a)),o.setState({books:a})})},o}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"app"},a.a.createElement(p.a,{exact:!0,path:"/",render:function(){return a.a.createElement(N,{books:e.state.books,onSwitchShelf:e.switchShelf,onRefreshAllBooks:e.refreshAllBooks})}}),a.a.createElement(p.a,{exact:!0,path:"/search",render:function(){return a.a.createElement(C,{selectedBooks:e.state.books,onSwitchShelf:e.switchShelf})}}))}}]),t}(a.a.Component),A=o(30);o(26);s.a.render(a.a.createElement(A.a,null,a.a.createElement(R,null)),document.getElementById("root"))}},[[16,2,1]]]);
//# sourceMappingURL=main.3d036c38.chunk.js.map